---
- name: Installing LAMP Architecture 
  hosts: all
  become: yes
  tasks:
    - name: install apache on Ubuntu
      apt:
        name: "{{apache_package1}}"
        update_cache: yes
        state: present
      when: ansible_facts ['distribution'] == "Ubuntu"  
    - name: install apache on CentOS
      yum:
        name: "{{apache_package2}}"
        state: present
      when: ansible_facts ['distribution'] == "CentOS" 
    - name: Install LAMP Packages
      apt: name={{ item }} update_cache=yes state=latest
      loop: [ 'python3-pymysql', 'php', 'php-mysql', 'libapache2-mod-php' ]
      when: "'{{ ansible_distribution}}' == 'Ubuntu' 

     

         
   

    
